<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<title>JsonpAccessTestPage</title>
	<link rel="stylesheet" type="text/css" href="main.css" />
	<script type="text/javascript">
	function readProductupJson(data){
    		// do stuff with JSON
    		var updates = data.ProductUpdates;
            var index = 0;
            var count = 0;
            while(count < 5) {
                var update = updates[index];
                if(update.product != "Charles Schwab")  {
                var newUpdate = document.createElement("div");
                var dateNode = document.createTextNode(update.date + " ");
                newUpdate.appendChild(dateNode);
                var linkElement=document.createElement("a");
                linkElement.href=update.link;
                linkElement.innerHTML=update.info;
                newUpdate.appendChild(linkElement);
                var container = document.getElementById("updatecontainer");
                container.appendChild(newUpdate);
                count++;
                }
                index++;
            }
    	}

    	var script = document.createElement('script');
    	script.src = 'http://ij8.github.io/Tests/ProductUpdateTest/productupdates.json'

    	document.getElementsByTagName('head')[0].appendChild(script);
		window.onload = foo(script)
</script>

</head>
<body>
	<div class="main-container">
		<div>List of Updates. This is taken from a json file.</div>
        <div id="updatecontainer"></div>
	</div>
</body>
</html>
