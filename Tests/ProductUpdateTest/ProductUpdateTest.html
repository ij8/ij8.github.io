<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<title>JsonpAccessTestPage</title>
	<link rel="stylesheet" type="text/css" href="main.css" />
	<script type="text/javascript">
	function foo(data){
    		// do stuff with JSON
    		var updates = data.ProductUpdates;
            for(i = 0; i < 5; i++) {
                var update = updates[i];
                var newUpdate = document.createElement("div");
                var dateNode = document.createTextNode(update.date + " ");
                newUpdate.appendChild(dateNode);
                var linkElement=document.createElement("a");
                linkElement.href=update.link;
                linkElement.innerHTML=update.info;
                newUpdate.appendChild(linkElement);
                var container = document.getElementById("updatecontainer");
                container.appendChild(newUpdate);
            }
    	}

    	var script = document.createElement('script');
    	script.src = 'http://ij8.github.io/Tests/ProductUpdateTest/testupdates.json'

    	document.getElementsByTagName('head')[0].appendChild(script);
		window.onload = foo(script)
</script>

</head>
<body>
	<div class="main-container">
		<div>Hello World</div>
        <div id="update"></div>
        <div id="date"></div>
		<div id="link"></div>
		<div id="info"></div>
        <div id="updatecontainer"></div>
	</div>
</body>
</html>
